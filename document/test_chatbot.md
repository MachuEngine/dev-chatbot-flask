# 한국어 교육 가이드 챗봇

- 학습자의 부정확한 입력을 단계별로 교정하고 자연스럽게 수정하며, 교육적인 정보를 생성하도록 설계된 모델입니다. 프로그램 내에서 '한국어 AI 선생님' 또는 '한국어 교육 프로그램 가이드'로 활용할 수 있습니다.

---

### 1. 챗봇의 역할
- 교정 전문가: 학습자의 구어체 잡음, 오타, 문법적 오류(조사, 시제 등)를 자동으로 수정하여 의도를 정확하게 파악합니다.
- 한국어 선생님: 사용자의 한국어 질문에 답하는 선생님 역할을 수행할 수 있습니다. 
- 지식 기반 답변: **RAG(검색 증강 생성)**를 통해 해당 한국어 교육 프로그램에 대한 정보를 사용자에게 제공할수 있습니다. (예시: 한국어 프로그램 페이지 정보)
- 레벨 맞춤: 학습자 레벨(초급, 중급, 고급)에 따라 교정 및 답변의 난이도를 조절할 수 있습니다.
---

### 단계별 API 파이프라인
이 챗봇은 `/chat` API 엔드포인트 요청 시 다음 5단계를 통해 사용자 입력을 후처리하고 답변을 생성을 합니다.

1. 규칙 기반 전처리 : `preprocess_user_input` 함수를 통해 입력된 텍스트에서 잡음이나 더듬는 표현(음.., 막)을 제거합니다. (특히 STT(음성 인식) 입력에 필수적)

2. Grammar 교정 : 한국어 특화 라이브러리( **'한국어 교육 전문가 텍스트 교정기'**)를 통해 띄어쓰기와 문법/어휘 오류를 검사하고 수정합니다. 

3. Context 교정 : LLM 모델(`chat GPT 3.5 turbo`)을 통해 대화 history기반으로 문맥 파악 후 교정합니다.

4. RAG 검색 (Retrieval): 교정된 텍스트에서 키워드를 추출하여 내부 DataBase (예: 한국어 교육 프로그램 정보 등)에서 관련 지식을 검색합니다.

5. 답변 생성 (Generation): 검색된 지식을 참고하여 GPT 모델이 '한국어 선생님' 역할로 학습자에게 적절하고 교육적인 최종 답변을 제공합니다.

---

### 프로그램 통합 방법
한국어 교육 프로그램(앱/웹사이트)에서 챗봇 기능을 사용하려면, 클라이언트에서 다음 작업을 통해 챗봇을 호출하여 사용할 수 있습니다.

1. 사용자 입력 및 레벨 수집: 학습자의 질문과 레벨(`beginner`, `intermediate`, `advanced`)을 수집합니다. (default: `intermediate`)

2. API 호출: 수집된 데이터를 POST 방식으로 챗봇 서버의 `/chat` 엔드포인트에 전송합니다.

```JSON
    {
        "message": "나는 아저 저는 어제 밥 먹었습니까 아 아니 먹었어요",
        "level": "intermediate"
    }
```
3. 응답 처리: 챗봇 서버에서 받은 JSON 응답 중 `chatbot_response` 키의 값을 추출하여 사용자에게 보여줍니다. 
   필요 시 `corrected_input`키의 값을 통해 대화창에 기존 사양자 입력 대신 교정된 사용자 입력을 사용자에게 보여줄 수 있습니다.
   `diff_html`키의 값을 통해 사용자에게 교정된 부분을 보여주어 한국어 학습에 도움을 줄 수 있습니다. 
   (나머지 키들은 프로그램 개발 및 디버깅에 활용됩니다.)
```JSON
    {
        "original_input": user_input, # 기존 사용자 입력 
        "corrected_input": corrected, # 교정된 사용자 입력
        "diff_html": diff_html,        # 화면에 보여줄 교정 피드백
        "chatbot_response": bot_response, # 챗봇 답변
        "retrieved_context": rag_info # RAG 키워드 
    }
```